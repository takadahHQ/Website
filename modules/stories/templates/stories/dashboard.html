{% extends 'base.html' %}
{% load advert_tags %}
{% load humanize %}
{% load tailwind_filters %}

{% block title %}
Dashboard
{% endblock title %}
{% block breadcrumbs %}
<li><a href="{% url 'stories:author:dashboard' %}">Author</a></li> 
<li><a>Dashboard</a></li> 
{% endblock %}
{% block content %}
<!-- Add Story -->
<section class="w-full mb-2">
<a href="{% url 'stories:author:create' %}" class="btn btn-primary">Create Story</a>
</section>
<section>
    <div class="flex flex-col space-y-8">
        <!-- First Row -->
        <div class="grid grid-cols-1 md:grid-cols-4 xl:grid-cols-5 px-4 xl:p-0 gap-y-4 md:gap-6">
            <div class="md:col-span-2 xl:col-span-3 bg-white p-6 rounded-2xl border border-mono-50">
                <div class="flex flex-col space-y-6 md:h-full md:justify-between">
                    <div class="flex justify-between">
                        <span class="text-xs text-mono-500 font-semibold uppercase tracking-wider">
                            Main Account
                        </span>
                        <span class="text-xs text-mono-500 font-semibold uppercase tracking-wider">
                            Available Funds
                        </span>
                    </div>
                    <div class="flex gap-2 md:gap-4 justify-between items-center">
                        <div class="flex flex-col space-y-4">
                            <h2 class="text-mono-800 font-bold tracking-widest leading-tight">{{ user.name }}'s Earning</h2>
                            <div class="flex items-center gap-4">
                                <p class="text-lg text-mono-600 tracking-wider">**** **** *321</p>
                                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none"
                                    viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M17 8l4 4m0 0l-4 4m4-4H3" />
                                </svg>
                            </div>
                        </div>
                        <h2 class="text-lg md:text-xl xl:text-3xl text-mono-700 font-black tracking-wider">
                            <span class="md:text-xl">$</span>
                            00,000.00
                        </h2>
                    </div>
                    <div class="flex gap-2 md:gap-4">
                        <a href="#"
                            class="bg-mono-600 px-5 py-3 w-full text-center md:w-auto rounded-lg text-white text-xs tracking-wider font-semibold hover:bg-mono-800">
                            Transfer Money
                        </a>
                        <a href="#"
                            class="bg-mono-50 px-5 py-3 w-full text-center md:w-auto rounded-lg text-mono-600 text-xs tracking-wider font-semibold hover:bg-mono-600 hover:text-white">
                            Link Account
                        </a>
                    </div>
                </div>
            </div>
            <div
                class="col-span-2 p-6 rounded-2xl bg-gradient-to-r from-mono-500 to-mono-800 flex flex-col justify-between">
                <div class="flex flex-col">
                    <p class="text-white font-bold">News</p>
                    <p class="mt-1 text-xs md:text-sm text-mono-50 font-light leading-tight max-w-sm">
                        No news at this time unfortunately.
                    </p>
                </div>
                <div class="flex justify-between items-end">
                    <a href="#"
                        class="bg-mono-800 px-4 py-3 rounded-lg text-white text-xs tracking-wider font-semibold hover:bg-mono-600 hover:text-white">
                        Learn More
                    </a>
                    <img src="assets/calendar.png" alt="calendar" class="w-auto h-24 object-cover">
                </div>
            </div>

        </div>
        <!-- End First Row -->
        <!-- Start Second Row -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 px-4 xl:p-0 gap-4 xl:gap-6">
            <div class="col-span-1 md:col-span-2 lg:col-span-4 flex justify-between">
                <h2 class="text-xs md:text-sm text-mono-700 font-bold tracking-wide md:tracking-wider">
                    Lifetime Statistics</h2>
                <a href="#" class="text-xs text-mono-800 font-semibold uppercase">More</a>
            </div>
            <div class="bg-white p-6 rounded-xl border border-mono-50">
                <div class="flex justify-between items-start">
                    <div class="flex flex-col">
                        <p class="text-xs text-mono-600 tracking-wide">Views</p>
                        <h3 class="mt-1 text-lg text-mono-500 font-bold"> {{ stats.views.result }}</h3>
                        <span class="mt-4 text-xs text-mono-500">Last  {{ stats.views.updated }}</span>
                    </div>
                    <div class="bg-mono-500 p-1 xl:p-2 rounded-md">
                        <img src="assets/dish-2.png" alt="icon" class="w-auto h-6 xl:h-8 object-cover">
                    </div>
                </div>
            </div>
            <div class="bg-white p-6 rounded-xl border border-mono-50">
                <div class="flex justify-between items-start">
                    <div class="flex flex-col">
                        <p class="text-xs text-mono-600 tracking-wide">Likes</p>
                        <h3 class="mt-1 text-lg text-green-500 font-bold">{{ stats.likes.result }}</h3>
                        <span class="mt-4 text-xs text-mono-500">Last {{ stats.likes.updated }}</span>
                    </div>
                    <div class="bg-green-500 p-1 xl:p-2 rounded-md">
                        <img src="assets/grocery.png" alt="icon" class="w-auto h-6 xl:h-8 object-cover">
                    </div>
                </div>
            </div>
            <div class="bg-white p-6 rounded-xl border border-mono-50">
                <div class="flex justify-between items-start">
                    <div class="flex flex-col">
                        <p class="text-xs text-mono-600 tracking-wide">DisLikes</p>
                        <h3 class="mt-1 text-lg text-yellow-500 font-bold">{{ stats.dislikes.result }}</h3>
                        <span class="mt-4 text-xs text-mono-600">Last {{ stats.dislikes.updated }}</span>
                    </div>
                    <div class="bg-yellow-500 p-1 xl:p-2 rounded-md">
                        <img src="assets/gaming.png" alt="icon" class="w-auto h-6 xl:h-8 object-cover">
                    </div>
                </div>
            </div>
            <div class="bg-white p-6 rounded-xl border border-mono-50">
                <div class="flex justify-between items-start">
                    <div class="flex flex-col">
                        <p class="text-xs text-mono-600 tracking-wide">Reviews</p>
                        <h3 class="mt-1 text-lg text-indigo-500 font-bold">{{ stats.reviews.result }}</h3>
                        <span class="mt-4 text-xs text-mono-500">Last {{ stats.reviews.updated }}</span>
                    </div>
                    <div class="bg-indigo-500 p-1 xl:p-2 rounded-md">
                        <img src="assets/holiday.png" alt="icon" class="w-auto h-6 xl:h-8 object-cover">
                    </div>
                </div>
            </div>
        </div>
        <!-- End Second Row -->
        <!-- Start Third Row -->
        <div class="grid grid-cols-1 md:grid-cols-5 items-start px-4 xl:p-0 gap-y-4 md:gap-6">
            <div class="col-start-1 col-end-5">
                <h2 class="text-xs md:text-sm text-mono-600 font-bold tracking-wide">Earning Summary Transactions</h2>
            </div>
            <div class="col-span-2 bg-white p-6 rounded-xl border border-mono-50 flex flex-col space-y-6">
                <p class="text-rebel-500">These figures are for demo purposes only and are not yet implemented.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 flex justify-between items-center">
                    <div class="p-4 cursor-pointer border">
                        <span class="text-xs text-mono-500 font-semibold">Daily</span>
                        <h2 class="text-mono-800 font-bold tracking-wider">$ {{ earnings.daily.amount }}</h2>
                    </div>
                    <div class="p-4 cursor-pointer border">
                        <span class="text-xs text-mono-500 font-semibold">Weekly</span>
                        <h2 class="text-mono-800 font-bold tracking-wider">$ {{ earnings.weekly.amount }}</h2>
                    </div>
                    <div class="p-4 cursor-pointer border">
                        <span class="text-xs text-mono-500 font-semibold">Monthly</span>
                        <h2 class="text-mono-800 font-bold tracking-wider">$ {{ earnings.monthly.amount }}</h2>
                    </div>
                </div>
                <canvas id="myChart"></canvas>
            </div>
            <div class="col-span-3 bg-white p-6 rounded-xl border border-mono-50 flex flex-col space-y-6">
                <div class="flex justify-between items-center">
                    <h2 class="text-sm text-mono-600 font-bold tracking-wide">Published Stories</h2>
                    <a href="{% url 'stories:author:list' %}"
                        class="px-4 py-2 text-xs bg-mono-100 text-mono-500 rounded uppercase tracking-wider font-semibold hover:bg-mono-300">More</a>
                </div>
                <ul class="divide-y-2 divide-mono-100 overflow-x-auto w-full">
                    <li class="py-3 flex justify-between text-sm text-mono-500 font-semibold">
                        <p class="px-4 font-semibold">Last Chapter</p>
                        <p class="px-4 text-mono-600">Story Title</p>
                        <p class="px-4 tracking-wider">Chapter - Title</p>
                        <p class="px-4 text-mono-600">Genre</p>
                        <p class="md:text-base text-mono-800 flex items-center gap-2">
                            Actions
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M19 9l-7 7-7-7" />
                            </svg>
                        </p>
                    </li>
                    {% for story in published %}
                    <li class="py-3 flex justify-between text-sm text-mono-500 font-semibold">
                        <p class="px-4 font-semibold">{{ story.chapter_set.last.created_at| naturalday |default:"No chapter" }}</p>
                        <p class="px-4 text-mono-600">{{ story.title }}</p>
                        <p class="px-4 tracking-wider">{{ story.chapter_set.last.title|default:"No chapter" }}</p>
                        <p class="px-4 text-mono-600">{{ story.genre.first.name }}</p>
                        <p class="md:text-base text-mono-800 flex items-center gap-2">
                            16.90
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M19 9l-7 7-7-7" />
                            </svg>
                        </p>
                    </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
        <!-- End Third Row -->
    </div>
</section>
{% endblock content %}