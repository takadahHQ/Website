{% extends 'base.html' %}
{% load tailwind_filters %}
{% load humanize %}

{% block title %}
{{ user.name }}'s Profile
{% endblock title %}

{% block page-title %}
Profile
{% endblock page-title %}
{% block breadcrumbs %}
<li><a>authors</a></li> 
<li><a> {{ author.name }}</a></li> 
{% endblock %}
{% block content %}
<!-- profile section -->
<div class="bg-mono-50 rounded shadow-mono-400 p-2 lg:p-8 mt-2 dark:bg-mono-700 dark:text-mono-200">
    {%if user.profile_photo %}
    <img class="img-circle border bg-mono-50 md:w-50"  src="{{ user.profile_photo.url}}"/>
    {% else %}
<<<<<<< HEAD
<<<<<<< HEAD
    <img class="img-circle border bg-mono-50 md:w-50" src="{{ author.get_profile_image }}"/>
    {% endif %}
    <div class="my-1 p-1 w-full lg:my-4 lg:px-4">
    <h1 class="text-4xl dark:text-mono-100 flex justify-center"> {{ author.name }}</h1>
=======
    <img class="img-circle border bg-mono-50 md:flex md:w-50" src="{{ author.get_profile_image }}"/>
    {% endif %}
    <div class="my-1 p-1 w-full lg:my-4 lg:px-4">
    <h1 class="text-4xl dark:text-mono-100 flex justify-center"> {{ author.name| capfirst }}</h1>
>>>>>>> master/master
    {%if author.bio %}
    <p class="flex justify-center">{{ author.bio| safe }}</p>
=======
    <img class="img-circle border bg-mono-50 md:w-50" src="{{ user.get_profile_image }}"/>
    {% endif %}
    <div class="my-1 p-1 w-full lg:my-4 lg:px-4">
    <h1 class="text-4xl dark:text-mono-100 flex justify-center"> {{ user.name }}</h1>
    {%if user.bio %}
    <p class="flex justify-center">{{ user.bio| safe }}</p>
>>>>>>> parent of 743a289 (today)
    {% else %}
    <p class="flex justify-center">Writing is the secret technique to exploring worlds yet undiscovered.</p>
    {% endif %}
    <div class="flex justify-center">
        {{ user.followers_count }} Followers  {% if user.website %}| {{ user.website| safe }} {% endif %} {% if user.location %}| {{ user.location| safe }}  {% endif %} {% if user.birth_date %}| {{ user.birth_date| safe }} {% endif %} | Earned | Views 
    </div>
    <div class="flex justify-center">
       Joined {{ user.date_joined|date:'d, M' }}   {% if user.updated_at != user.date_joined %}| Updated Profile: {{ user.updated_at|naturaltime }} {% endif %} {% if user.location %}| {{ user.location| safe }}  {% endif %} {% if user.birth_date %}| {{ user.birthdate|date:'d, M' }} {% endif %} | {% if user.referral_id %}|  Introduced By: {{ user.referral_id.name | safe }}  {% endif %} | Views 
    </div>
    </div>
</div>
<!-- end profile -->
<!-- tabs -->
<div class="bg-mono-50 rounded shadow-mono-400 p-2 lg:p-8 mt-2 dark:bg-mono-700 dark:text-mono-200">
    <section>
    <div x-data="{
        tabs: [ 'Stories', 'Edited', 'Followed', 'Reviews'],
        activeTabIndex: 0
    }">
        <div class="tabs my-6">
            <template x-for="(tab, index) in tabs" :key="index">
                <a class="tab tab-bordered dark:text-mono-200" 
                    :class="{'tab-active': activeTabIndex == index}"
                    x-on:click="activeTabIndex = index"
                    x-text=tab
                ></a>
            </template>
        </div>
        <div class="my-6 p-6">
            <div x-show="activeTabIndex == 0">
                <div class="text-2xl">{{ author.name }}'s Stories</div><hr/>
            <div class="text-mono-300">
                {% for story in user.stories_set.all %}
                <li>
                    {{ story.title }}
                </li>
                {% empty %}
                {{ author.name | title }} has not written any story
                {% endfor %}
            </div>
            </div>
                <div x-show="activeTabIndex == 1">
                    <div class="text-2xl">{{ author.name }}'s Edited Stories</div><hr/>
                <div class="text-mono-300">
                    {% for story in user.stories_set.all %}
                    <li>
                        {{ story.title }}
                    </li>
                    {% empty %}
                    {{ author.name | title }} has not edited any story
                    {% endfor %}
                </div>
                </div>
            <div x-show="activeTabIndex == 2">
                Latest Releaseï¼š Chapter {{ story.chapters_set.last.position  }}: <a href="{{ story.chapters_set.last.get_absolute_url }}">{{ story.chapters_set.last.title | title }}</a> {{ story.chapters_set.last.created_at | timesince }}<hr class="mt-5">
                <div class="columns-2">
                {% for chapter in story.chapters_set.all %}
                <div class="p-4">
                {{ chapter.position }} <a class="text-mono-800" href="{{ chapter.get_absolute_url }}">{{ chapter.title | title }}</a> <br>
                <p class="text-xs text-mono-400"> {{ chapter.created_at | timesince }} ago</p>
                </div>
                {% endfor %}
            </div>
            </div>
            <div x-show="activeTabIndex == 3">Reviews<br>Coming Soon</div>
        </div>
    </div>
</section>
</div>
{% endblock content %}